<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:util="http://www.springframework.org/schema/util"
    xmlns:cxf="http://cxf.apache.org/core"
    xmlns:jaxrs="http://cxf.apache.org/jaxrs"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
            http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/util
            http://www.springframework.org/schema/util/spring-util.xsd
            http://cxf.apache.org/core
            http://cxf.apache.org/schemas/core.xsd
            http://cxf.apache.org/jaxrs
            http://cxf.apache.org/schemas/jaxrs.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml" />

    <bean id="comkerExceptionMapper"
            class="net.cokkee.comker.api.ComkerExceptionMapper">
        <property name="exceptionTransformer" ref="comkerExceptionTransformer" />
    </bean>

    <bean id="comkerJaxbProvider"
            class="org.apache.cxf.jaxrs.provider.JAXBElementProvider">
    </bean>

    <bean id="comkerJsonProvider"
            class="org.apache.cxf.jaxrs.provider.json.JSONProvider">
        <property name="dropRootElement" value="true"/>
        <property name="dropCollectionWrapperElement" value="true" />
        <property name="supportUnwrapped" value="true"/>
        <property name="serializeAsArray" value="true"/>
        <property name="arrayKeys" ref="comkerJsonKeys"/>
        <property name="produceMediaTypes" ref="comkerJsonTypes"/>
        <property name="consumeMediaTypes" ref="comkerJsonTypes"/>
    </bean>

    <util:list id="comkerJsonKeys">
        <value>collection</value>
        <value>values</value>
        <value>crewIds</value>
        <value>permissionIds</value>
        <value>moduleIds</value>
        <value>children</value>
        <value>globalRoleIds</value>
        <value>scopedRoleIds</value>
        <value>limitedSpotRoleIds</value>
    </util:list>

    <util:list id="comkerJsonTypes">
        <value>application/json</value>
    </util:list>
</beans>
